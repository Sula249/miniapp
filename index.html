// Инициализация Telegram WebApp API
const tg = window.Telegram.WebApp;

tg.ready(); // Подтверждаем готовность

// Автоматически расширяем окно для лучшего отображения контента
tg.expand();

// Обновление темы оформления
function updateTheme() {
    const themeParams = tg.themeParams;
    document.body.style.backgroundColor = themeParams.bg_color || "#ffffff";
    document.body.style.color = themeParams.text_color || "#000000";
    
    document.documentElement.dataset.theme = tg.colorScheme === "dark" ? "dark" : "light";
}

// Применяем тему при загрузке и при изменении
updateTheme();
tg.onEvent("themeChanged", updateTheme);

// Обновляем размер окна при изменении контента
tg.onEvent("viewportChanged", () => {
    tg.expand();
});

// Обработчик закрытия WebApp
function closeApp() {
    tg.close();
}

// Добавляем кнопку закрытия в Telegram WebApp
if (tg.isExpanded) {
    tg.MainButton.setText("Закрыть").show().onClick(closeApp);
}

console.log("Telegram MiniApp инициализирована");
